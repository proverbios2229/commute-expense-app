1. システム化の目的
・社員が交通費精算時に、定期券区間を考慮せず「全額」を申請してしまうミスを防止する。
・総務担当者が、毎月の交通費精算で定期券区間の有無を確認する工数を削減する。
・結果として、適正な交通費精算と総務の業務効率化を実現する。

2. システム概要
・名称（仮）：通勤交通費精算サポートシステム
・利用者：
　・一般社員：自分の交通費精算を入力・確認する
　・総務担当：社員の精算内容を一覧で確認し、会計処理に利用する
・利用形態：
　・社内ネットワークから利用するWebアプリケーション
　・PCブラウザ利用を想定（スマホ対応は将来検討）

3. 業務要件
　1.社員は、事前に「自分の定期券区間」をシステムに登録できる。
　2.社員は、定期券区間外の移動に対する交通費を、アプリを使って計算し申請できる。
　3.交通費の計算では、定期券内の移動分は精算対象外とし、「定期券内の途中駅 → 定期券外の目的駅」の運賃を算出する。
　4.総務は、社員ごとの精算申請一覧を月単位で確認できる。
　5.総務は、申請内容をCSV形式でダウンロードし、既存の経理・会計システムに取り込める。

4. 機能要件
4.1 画面（外部機能）
　1.ログイン画面
　　・ユーザーID／パスワードでログインできる。
　　・初期はDjango標準のユーザー管理を利用。
　2.ダッシュボード画面（簡易）
　　・自分の定期情報の有無を表示。
　　・直近の申請一覧を数件表示。
　3.定期券情報登録画面
　　・入力項目：
　　　　・定期区間：始発駅、終着駅（テキスト/候補選択）
　　　　・有効期間：開始日・終了日
　　・完了時には確認メッセージを表示。
　4.交通費申請入力画面
　　・入力項目：
　　　　・日付
　　　　・定期券内の乗車/降車駅（「途中駅」）
　　　　・定期券外の目的駅
　　　　・片道／往復区分
　　　　・備考；システムは入力内容から運賃を計算し、結果を画面に表示。ユーザーは内容を確認し、申請を確定できる。
　5.申請一覧画面（社員用）
　　・自分が登録した申請の一覧を表示。
　　・フィルタ：
　　　　・期間（例：年月）
　　・一覧項目：
　　　　・日付、区間、片道/往復、金額、備考
　6.申請一覧画面（総務用）
　　・全社員の申請一覧を表示。
　　・フィルタ：
　　　　・社員、期間（年月）、部門（将来対応でも可）
　　・CSVダウンロードボタン

4.2 内部機能（API・データ・連携）
　　・ユーザー管理API
ログインユーザー情報取得（自分の名前・メール等）
　　・定期券情報API
　　　　・登録／更新／参照
　　・交通費申請API
　　　　・新規登録（入力内容＋運賃計算）
　　　　・一覧取得（社員別・期間別）
　　・運賃計算ロジック
　　　　・MVP段階では、簡易な「運賃テーブル」をアプリ内に保持し、そこから金額を取得する。
　　　　・将来的に、外部の路線検索APIに差し替え可能な構造とする。
　　・CSV出力機能
サーバー側でCSVファイルを生成し、ダウンロードさせる。

5. 非機能要件
　1.可用性
　　・社内ツールのため、24h稼働までは求めない。
　　・平日業務時間（9:00〜18:00）で問題なく利用できることを目安とする。
　2.性能
　　・同時利用者数：数十人程度を想定。
　　・一覧画面の表示は、通常 3 秒以内に完了することを目標。
　3.セキュリティ
　　・認証はログイン必須。
　　・一般社員は自分のデータのみ参照・編集可能。
　　・総務アカウントは全社員の申請情報を参照可能。
　　・開発環境・本番環境とも HTTPS を前提（本番想定）。
　4.運用・保守
　　・ログ出力：エラー時のスタックトレース・リクエスト情報をサーバーログに出力。
　　・バックアップ：DBの定期バックアップを取得できる構成にする（将来対応方針として記載）。

6. 制約条件・前提
　1.鉄道運賃の取得について
　　・正式に提供される「駅・運賃API」を契約していない前提とする。
　　・MVPでは、主要区間についてはアプリ内で運賃テーブルを定義し、その範囲のみ自動計算対象とする。
　　・将来、商用APIを利用する場合は、運賃計算モジュールを差し替える。
　2.利用環境
　　・社員の利用端末は Windows PC を想定（ブラウザは Chrome または Edge）。
　　・開発環境は Mac（MacBook Air）＋ VSCode。